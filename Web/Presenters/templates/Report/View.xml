{extends "../@layout.xml"}

{block title}{$report->getReason()}{/block}

{block header}
    <a href="/admin/support/reports">{_list_of_reports}</a>
    »
    {_report_number}{$report->getId()}
{/block}

{block content}
    <div class="tabs">{include "../NoSpam/Tabs.xml", mode => "reports"}</div>
    <br />
    <p>
        <b>{$report->getReportAuthor()->getCanonicalName()}</b> пожаловался на <b>{$report->getContentName()}</b>
        <br />
        <b>{_comment}:</b> {$report->getReason()}
    </p>
    {include "ViewContent.xml", type => $report->getContentType(), object => $report->getContentObject()}
    <form action="/admin/reportAction{$report->getId()}" method="post">
        <div n:if="$report->getContentType() == 'user'">
            <input type='checkbox' name='excludeUserFromGlobalFeed' id="excludeUserFromGlobalFeed"> {_report_force_exclude_user_from_global_feed|noescape}
        </div>
        <div n:if="$report->getContentType() != 'user'">
            <input type='checkbox' name='excludeAuthorFromGlobalFeed' id="excludeAuthorFromGlobalFeed">
            {_report_force_exclude_author_from_global_feed|noescape} (<a href="{$report->getAuthor(true)->getUrl()}" target="_blank">{$report->getAuthor(true)->getCanonicalName()}</a>)
        </div>
        <div n:if="$report->getAuthor()->getId() != $report->getAuthor(true)->getId() || $report->getContentType() == 'group'">
            <input type='checkbox' name='excludeGroupFromGlobalFeed' id="excludeGroupFromGlobalFeed">
            {_report_force_exclude_group_from_global_feed|noescape}
            {if $report->getContentType() != 'group'}(<a href="{$report->getAuthor()->getUrl()}" target="_blank">{$report->getAuthor()->getCanonicalName()}</a>){/if}
        </div>
        <center>
            <form n:if="$report->getContentType() != 'group'" action="/admin/reportAction{$report->getId()}" method="post">
                <input type="hidden" name="hash" value="{$csrfToken}"/>
                <input type="submit" name="ban" value="{_ban_user_action}" class="button">
                <input n:if="$report->getContentType() !== 'user'" type="submit" name="delete" value="{_delete_content}" class="button">
                <input type="submit" name="ignore" value="{_ignore_report}" class="button">
            </form>
            <form n:if="$report->getContentType() == 'group'" action="/admin/reportAction{$report->getId()}" method="post">
                <input type="hidden" name="hash" value="{$csrfToken}"/>
                <input type="submit" name="banClubOwner" value="Заблокировать создателя" class="button">
                <input type="submit" name="banClub" value="Заблокировать группу" class="button">
                <input type="submit" name="ignore" value="{_ignore_report}" class="button">
            </form>
        </center>
    </form>
{/block}
